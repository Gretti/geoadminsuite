map
    name "demomap"

    # la taille est la meme que celle de la carte affichée dans la page web
    # (style middlemap défini dans le fichier de style styles.css
    size 670 430

    imagetype gif

    # extension spatiale du raster, obtenu avec la requete postgis:
    #select extent::box2d from raster_columns where r_table_name='mnt';
    extent 70645 6433104 489673 7018161

    # projection: requis par le protocole WMS
    projection
        "init=epsg:2154"
    end
    
    #MEtadonnées necessaires pour activer le protocole WMS server
    WEB
        metadata
            "wms_title"           "WMS Demo Server"
            "wms_onlineresource"  "http://localhost/cgi-bin/mapserv?map=/Users/nicolas/Projets/Formation/kits/postgis/tp/webmapping/TP_web2.map&"
            "wms_srs"             "EPSG:2154"
            "wms_enable_request"  "*"
        end
    END

    layer
        name "mnt"
        metadata
            "wms_title"           "mnt"
        end

        projection
            "init=epsg:2154"
        end

        type raster
        # dans le mapfile, les mots cles peuvent etre en minuscules ou majiscules
        STATUS default
        DATA "PG:host=localhost port=5432 dbname='tp' user='nicolas' table='mnt' mode='2'"	
        #DATA "PG:host=localhost port=5432 dbname='tp' user='nicolas' table='hill' mode='2'"	
        #DATA "/tmp/srtm_36_03_2154.tif"
        #PROCESSING "NODATA=999"
        CLASS
            name "mer"
            EXPRESSION ([pixel] <= 0 )
            STYLE
              COLOR 89 55 240
            END
        END     
        CLASS 
            name "elev"
           STYLE 
              COLORRANGE  0 0 0 255 255 255   
              DATARANGE 1 300  
           END
        END
    end
end